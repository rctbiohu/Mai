<!DOCTYPE html>
<!-- saved from url=(0109)file:///C:/Users/Algoritmika/Desktop/%D0%9D%D0%BE%D0%B2%D0%B0%D1%8F%20%D0%BF%D0%B0%D0%BF%D0%BA%D0%B0/hgj.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body style="display: flex; justify-content: center;">


<script>

    var gold = 0
    var canvas = document.createElement("canvas")
    document.body.style="display:flex;justify-content:center"
    var cxt = canvas.getContext("2d")
    document.body.appendChild(canvas)

    const width = canvas.width = 320
    const height = canvas.height = 480

    hero = new Image()
    hero.src = "heroesheet.png"
    map = new Image()
    map.src = "public.png"
    shest = new Image()
    shest.src = "0JmUDgGdeFg.jpg"
    trog = new Image()
   trog.src = "pgg.png"

    var AnimLine = 0
    let Kadr = 0
    const sprwidth = 96
    const sprheight = 105
    let platform = 0
    const slowframe = 5

    var mx = 100
    var my = 400
class item{
        constructor(pic,x,y){
            this.img = pic
            this.posx = x
            this.posy= y
        }

        draw(){
            cxt.drawImage(this.img,mx-this.posx,my-this.posy,40,40)
        }
    }
    class monster{
        constructor(pic,x,y){
            this.img = pic
            this.posx = x
            this.posy= y
        }
        draw(){
            cxt.drawImage(this.img,mx-this.posx,my-this.posy,40,40)
        }
        move(){
            if(this.posx +165>mx){this.posx -=1}
            if(this.posx +165<mx){this.posx +=1}
            if(this.posy +240>my){this.posy-=1}
            if(this.posy +240<my){this.posy +=1}
        }
    }

    ch1 = new item(shest,100,100)
    //ch2 = new item(shest,200,60)
    //ch3 = new item(shest,300,160)
    //ch4 = new item(shest,500,40)
    tugo = new monster(trog,150,150)
    var loot = [ch1]
    function collide(item){
        if((mx<item.posx + -210) &
        (mx>item.posx + 370))   {
            console.log(2)
            loot.shift(ch1)
        }
        else{
            console.log(3)
        }
    }
    function animate(){
        cxt.clearRect(0,0,width,height)
        cxt.drawImage(map,mx-800,my-800,width+800,height+800)
        cxt.drawImage(hero,Kadr*sprwidth,AnimLine*sprheight,sprwidth,sprheight,width/2,height/2,50,50)
        loot.forEach(elem => elem.draw())
        console.log(mx)
        console.log(my)
        cxt.fillStyle="#00F"
        cxt.font="bold 30pt TimesNewRoman"
        cxt.fillText("ololoyavoditelnlo",20,50)
        tugo.draw()
        tugo.move()
        if (platform % slowframe == 0){

if (Kadr < 9)
    Kadr++
else Kadr = 0}
 platform++       

 if(AnimLine==0){long=0}else{long=9}
        if(Kadr<0){Kadr=0}else{}
        if(AnimLine<0){AnimLine=0}else{}
        if(AnimLine>7){AnimLine=6}else{}
 collide(ch1)

        requestAnimationFrame(animate)
    }
    animate()
   
    

    document.addEventListener('keydown',({keyCode})=>{
        switch(keyCode){
            
             
            case 37:
              
                AnimLine =5
                mx +=5
               break;
            case 39:
                AnimLine =7
                mx -=5
                break;
                case 40:
                AnimLine =4
                my -=5
               break;
            case 38:
                AnimLine =6
                my +=5
                break;
                
                
         }
    })
</script><canvas width="320" height="480"></canvas></body></html>